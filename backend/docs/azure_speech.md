# 语音发音与口语流利度反馈设计 (Pronunciation & Fluency Feedback Design)

针对语音发音（Pronunciation）和口语流利度（Fluency）的反馈设计，必须要超越简单的“识别准确率”。基于语言学和目前的 AI 能力，一套优秀的口语反馈系统应该包含三个维度：**音素级准确度（Pronunciation）**、**韵律与语调（Prosody/Intonation）** 以及 **流利度（Fluency）**。

以下是为您设计的 **“AI 语音教练模块”** 详细功能设计文档。

## 功能模块详解：AI 智能语音分析 (Smart Speech Analysis)

### 1. 核心设计理念

- 用户不仅想知道“我对了吗？”，还想知道“我哪里读得不像本地人？”。
- 核心体验逻辑是：**可视化（Visualization）** + **对比（Comparison）** + **颗粒度（Granularity）**。

### 2. 功能细节拆解

#### A. 实时反馈层 (Instant Feedback - The "Traffic Light")

- **场景**：用户刚发完语音消息，气泡上屏时。
- **目标**：一眼看出整体好坏，不打断对话流。
- **整体评分环**：在用户语音气泡旁显示一个小圆环分数（如：85 分）。
- **逐词颜色标记 (Color-Coded Text)**：
  - 将用户的语音转写为文字显示在气泡下。
  - 🟢 **绿色**：发音完美。
  - 🟡 **黄色**：发音模糊或重音错误。
  - 🔴 **红色**：发音错误或严重吞音。
  - 🔘 **灰色**：漏读单词。

#### B. 深度诊断层 (Deep Dive - The "Correction Card")

- **场景**：用户点击那条“带颜色的语音气泡”后，底部弹出详细诊断卡片。

### 3. 音素级纠错 (Phoneme Level Error)

这是最硬核的功能，指出具体的发音部位错误。

- **错误定位**：如果用户把 "Think" 读成了 "Sink"。
- **UI 展示**：
  - 高亮单词 **Think**。
  - **音标对比**：你读的是 `/s/` (Sink)，正确是 `/θ/` (Think)。
  - **舌位图解/动图**：展示舌头应该咬在上下齿之间，而不是藏在牙齿后面。
  - (此处可调用舌位图)

### 4. 语调与重音 (Intonation & Stress)

很多用户单词读对了，但听起来像机器人，是因为没有语调。

- **音高曲线 (Pitch Contour)**：
  - 画出一条线，展示 AI (标准音) 的声调起伏（如：疑问句末尾上扬）。
  - 叠加用户录音的声调线。
  - **视觉反馈**：通过两条线的重合度，让用户看到自己是不是“平调”或“降调”了。
- **重音标记 (Stress Markers)**：
  - 在句子中被重读的单词上方打一个着重号 `·`。
  - 例如：I _didn't_ say that. (强调没说，而不是没做)。

### 5. 流利度分析 (Fluency Metrics)

- **WPM (Words Per Minute)**：显示用户的语速 vs 本地人平均语速。
- **停顿检测 (Pause Detection)**：
  - 在句子中不该停顿的地方（如词组中间）标记断裂图标 `//`。
  - 识别并标记口癖（Fillers），如 "um", "uh", "like"。

#### C. 练习与修正 (Practice Loop)

- **目标**：形成闭环，让用户改错。
- **影子跟读 (Shadowing Mode)**：
  - **听标准音**：播放 AI 的完美发音。
  - **听原音**：播放用户刚才的录音（羞耻感是进步的动力）。
  - **合成对比**：即时把两个声音拼在一起播放（左耳用户，右耳 AI），让差距无处遁形。
  - **再次尝试**：提供一个“重录”按钮，只针对这一句话进行 Loop 练习，直到变绿。

## 6. UI 交互线框描述

当用户点击一条评分为 "60 分" 的语音消息时，弹出的 Action Sheet 布局如下：

```text
+-------------------------------------------------------+
|        [Score: 60] Needs Work   [Retry Button 🎤]    |
+-------------------------------------------------------+
|  Sentence:                                            |
|  I [want] to [live] in a [hotel].                     |
|    (黄)      (红)       (绿)                          |
+-------------------------------------------------------+
| 🔴 Error Focus: "live"                                |
| ---------------------------------------------------   |
| 👂 You said: /liːv/ (leave)    [Play User Audio]     |
| 🤖 Correct:  /lɪv/ (live)      [Play AI Audio]       |
|                                                       |
| 💡 Tip: /ɪ/ 是短元音，嘴巴放松，不要拉长。            |
+-------------------------------------------------------+
| 🌊 Intonation (语调):                                 |
| [ 图表：显示一条波浪线，并在末尾标示出你没有升调 ]    |
+-------------------------------------------------------+
```
